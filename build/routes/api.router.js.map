{"version":3,"sources":["../../app/routes/api.router.js"],"names":["express","controller","appUtils","info","apiRouter","Router","use","req","res","next","reqId","genRequestId","reqDate","Date","api","authorize"],"mappings":";;;;;;AAAA;;IAAYA,O;;AACZ;;;;AACA;;IAAYC,U;;AACZ;;IAAYC,Q;;AAEZ;;;;AACA;;;;AACA;;;;;;;;AAL2D;AAFxB;AAQnC,iBAAOC,IAAP,CAAY,2BAAZ,E,CAPmC;;;AASnC,IAAIC,YAAYJ,QAAQK,MAAR,EAAhB,C,CAAkC;;AAElCD,UAAUE,GAAV,CAAc,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAChCF,MAAIG,KAAJ,GAAYR,SAASS,YAAT,EAAZ;AACAJ,MAAIK,OAAJ,GAAc,IAAIC,IAAJ,EAAd;AACAZ,aAAWa,GAAX,CAAeP,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB;AACD,CAJD;;AAMA;AACAL,UAAUE,GAAV,CAAc,SAAd;AACAF,UAAUE,GAAV,CAAc,OAAd;AACAF,UAAUE,GAAV,CAAc,WAAd;;AAEAF,UAAUE,GAAV,CAAc,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAChCR,aAAWc,SAAX,CAAqBR,GAArB,EAA0BC,GAA1B,EAA+BC,IAA/B;AACD,CAFD;;AAIA,iBAAON,IAAP,CAAY,0BAAZ;;kBAEeC,S","file":"api.router.js","sourcesContent":["import * as express from 'express' // Load express\nimport logger from '../log/logger' // Load logger\nimport * as controller from '../module/api/api.controller' // Load controller\nimport * as appUtils from '../utils/app-utils'\n\nimport userRouter from '../module/user/users.routes'\nimport authenRouter from '../module/authentication/authentication.routes'\nimport merchantRouter from '../module/merchant/merchant.routes'\nlogger.info('Loading server api routes');\n\nlet apiRouter = express.Router(); // Load router\n\napiRouter.use((req, res, next) => {\n  req.reqId = appUtils.genRequestId();\n  req.reqDate = new Date();\n  controller.api(req, res, next)\n});\n\n//  Load routes for out controllers\napiRouter.use('/authen', authenRouter);\napiRouter.use('/user', userRouter);\napiRouter.use('/merchant', merchantRouter);\n\napiRouter.use((req, res, next) => {\n  controller.authorize(req, res, next)\n});\n\nlogger.info('Server api routes loaded');\n\nexport default apiRouter\n"]}
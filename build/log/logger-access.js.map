{"version":3,"sources":["../../app/log/logger-access.js"],"names":["winston","logDir","logPathConfig","accessLog","existsSync","mkdirSync","logAccess","createLogger","format","printf","info","message","transports","DailyRotateFile","filename","datePattern","zippedArchive","maxSize","maxFiles","exitOnError"],"mappings":";;;;;;AAAA;;IAAYA,O;;AACZ;;;;AACA;;AACA;;;;;;;;AAEA,IAAIC,SAAS,iBAAOC,aAAP,CAAqBC,SAAlC,C,CAA6C;;AAE7C;AACA,aAAGC,UAAH,CAAcH,MAAd,KAAyB,aAAGI,SAAH,CAAaJ,MAAb,CAAzB;AACA,IAAIK,YAAYN,QAAQO,YAAR,CAAqB;AACnCC,UAAQR,QAAQQ,MAAR,CAAeC,MAAf,CAAsB;AAAA,gBAAWC,KAAKC,OAAhB;AAAA,GAAtB,CAD2B;AAEnCC,cAAY,CACV,IAAIZ,QAAQY,UAAR,CAAmBC,eAAvB,CAAuC;AACrCC,cAAUb,SAAS,mBADkB;AAErCc,iBAAa,eAFwB;AAGrCC,mBAAe,KAHsB;AAIrCC,aAAS,KAJ4B;AAKrCC,cAAU;AAL2B,GAAvC,CADU,CAFuB;AAWnCC,eAAa;AAXsB,CAArB,CAAhB;;kBAceb,S","file":"logger-access.js","sourcesContent":["import * as winston from 'winston'\nimport fs from 'fs'\nimport 'winston-daily-rotate-file'\nimport config from 'config'\n\nlet logDir = config.logPathConfig.accessLog; // directory path of log\n\n// check log exists\nfs.existsSync(logDir) || fs.mkdirSync(logDir);\nlet logAccess = winston.createLogger({\n  format: winston.format.printf(info => `${info.message}`),\n  transports: [\n    new winston.transports.DailyRotateFile({\n      filename: logDir + 'access_%DATE%.log',\n      datePattern: 'YYYYMMDD_HH00',\n      zippedArchive: false,\n      maxSize: '20m',\n      maxFiles: '1d'\n    })\n  ],\n  exitOnError: false\n});\n\nexport default logAccess\n"]}
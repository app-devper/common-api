{"version":3,"sources":["../../app/log/logger.js"],"names":["winston","format","combine","timestamp","printf","logDir","logPathConfig","appLog","existsSync","mkdirSync","myFormat","info","level","toUpperCase","message","logger","createLogger","transports","Console","DailyRotateFile","filename","datePattern","zippedArchive","maxSize","maxFiles","exitOnError","isLocal","remove"],"mappings":";;;;;;AAAA;;IAAYA,O;;AACZ;;;;AACA;;AACA;;;;;;;;sBACuCA,QAAQC,M;IAAvCC,O,mBAAAA,O;IAASC,S,mBAAAA,S;IAAWC,M,mBAAAA,M;;;AAE5B,IAAIC,SAAS,iBAAOC,aAAP,CAAqBC,MAAlC,C,CAA0C;;AAE1C;AACA,aAAGC,UAAH,CAAcH,MAAd,KAAyB,aAAGI,SAAH,CAAaJ,MAAb,CAAzB;;AAEA,IAAMK,WAAWN,OAAO,gBAAQ;AAC9B,SAAUO,KAAKR,SAAf,SAA4BQ,KAAKC,KAAL,CAAWC,WAAX,EAA5B,UAAyDF,KAAKG,OAA9D;AACD,CAFgB,CAAjB;;AAIA,IAAIC,SAASf,QAAQgB,YAAR,CAAqB;AAChCf,UAAQC,QACNC,UAAU;AACRF,YAAQ;AADA,GAAV,CADM,EAINS,QAJM,CADwB;AAOhCO,cAAY,CACV,IAAIjB,QAAQiB,UAAR,CAAmBC,OAAvB,EADU,EAEV,IAAIlB,QAAQiB,UAAR,CAAmBE,eAAvB,CAAuC;AACrCC,cAAUf,SAAS,gBADkB;AAErCgB,iBAAa,eAFwB;AAGrCC,mBAAe,KAHsB;AAIrCC,aAAS,KAJ4B;AAKrCC,cAAU;AAL2B,GAAvC,CAFU,CAPoB;AAiBhCC,eAAa;AAjBmB,CAArB,CAAb;;AAoBA,IAAI,CAAC,iBAAOnB,aAAP,CAAqBoB,OAA1B,EAAmC;AACjCX,SAAOY,MAAP,CAAc3B,QAAQiB,UAAR,CAAmBC,OAAjC;AACD;;kBAEcH,M","file":"logger.js","sourcesContent":["import * as winston from 'winston'\nimport fs from 'fs'\nimport 'winston-daily-rotate-file'\nimport config from 'config'\nconst { combine, timestamp, printf } = winston.format;\n\nlet logDir = config.logPathConfig.appLog; // directory path of log\n\n// check log exists\nfs.existsSync(logDir) || fs.mkdirSync(logDir);\n\nconst myFormat = printf(info => {\n  return `${info.timestamp} ${info.level.toUpperCase()}: ${info.message}`;\n});\n\nlet logger = winston.createLogger({\n  format: combine(\n    timestamp({\n      format: 'YYYY-MM-DD HH:mm:ss'\n    }),\n    myFormat\n  ),\n  transports: [\n    new winston.transports.Console(),\n    new winston.transports.DailyRotateFile({\n      filename: logDir + 'app_%DATE%.log',\n      datePattern: 'YYYYMMDD_HH00',\n      zippedArchive: false,\n      maxSize: '20m',\n      maxFiles: '1d'\n    })\n  ],\n  exitOnError: false\n});\n\nif (!config.logPathConfig.isLocal) {\n  logger.remove(winston.transports.Console)\n}\n\nexport default logger\n"]}